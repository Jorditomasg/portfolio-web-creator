<div>
  <div class="flex items-center justify-between mb-8 sticky top-0 bg-dark-bg/95 backdrop-blur z-20 py-4 border-b border-dark-border -mx-8 px-8">
    <h1 class="text-2xl font-bold text-white">Editar Sobre Mí & Hero</h1>
    <button (click)="save()" [disabled]="!isDirty() || isSaving()"
            class="px-6 py-2.5 bg-primary hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed text-dark-bg font-medium rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary/20">
      @if (isSaving()) {
        <svg class="animate-spin h-5 w-5 text-dark-bg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Guardando...
      } @else {
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
        </svg>
        Guardar Cambios
      }
    </button>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- About Section -->
    <div class="bg-dark-surface rounded-xl border border-dark-border p-6 h-fit">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-white">Información Personal</h2>
        @if (isDirtyAbout()) {
          <span class="text-gray-400 text-sm animate-pulse">Modificado</span>
        }
      </div>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm text-gray-400 mb-1">Biografía</label>
          <textarea [(ngModel)]="aboutForm.bio" name="bio" rows="6"
                    class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white resize-none transition-colors"
                    (ngModelChange)="checkDirtyAbout()"></textarea>
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-1">Highlights (uno por línea)</label>
          <textarea [(ngModel)]="aboutForm.highlightsText" name="highlights" rows="4"
                    class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white resize-none transition-colors"
                    placeholder="5+ años de experiencia&#10;Proyectos internacionales&#10;..."
                    (ngModelChange)="checkDirtyAbout()"></textarea>
        </div>
      </div>
    </div>

    <!-- Hero Section -->
    <div class="bg-dark-surface rounded-xl border border-dark-border p-6 h-fit">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-white">Sección Hero</h2>
        @if (isDirtyHero()) {
          <span class="text-gray-400 text-sm animate-pulse">Modificado</span>
        }
      </div>

      <div class="space-y-4">
        <div class="p-4 bg-dark-bg rounded-lg border border-dark-border mb-4">
          <p class="text-sm text-gray-400 mb-2">Vista previa del título:</p>
          <p class="text-xl font-bold">
            <span class="text-white">{{ heroForm.title || 'Título' }}</span>
            @if (heroForm.title_highlight) {
              <span class="text-primary">, {{ heroForm.title_highlight }}</span>
            }
          </p>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-400 mb-1">Título (ES)</label>
            <input [(ngModel)]="heroForm.title" name="title"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors"
                   placeholder="Desarrollador Full Stack" (ngModelChange)="checkDirtyHero()">
          </div>
          <div>
            <label class="block text-sm text-gray-400 mb-1">Destacado (ES)</label>
            <input [(ngModel)]="heroForm.title_highlight" name="title_highlight"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors"
                   placeholder="especialista en Angular" (ngModelChange)="checkDirtyHero()">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-400 mb-1">Title (EN)</label>
            <input [(ngModel)]="heroForm.title_en" name="title_en"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors"
                   placeholder="Full Stack Developer" (ngModelChange)="checkDirtyHero()">
          </div>
          <div>
            <label class="block text-sm text-gray-400 mb-1">Highlight (EN)</label>
            <input [(ngModel)]="heroForm.title_highlight_en" name="title_highlight_en"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors"
                   placeholder="Angular specialist" (ngModelChange)="checkDirtyHero()">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-400 mb-1">Subtítulo (ES)</label>
            <input [(ngModel)]="heroForm.subtitle" name="subtitle"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors" (ngModelChange)="checkDirtyHero()">
          </div>
          <div>
            <label class="block text-sm text-gray-400 mb-1">Subtitle (EN)</label>
            <input [(ngModel)]="heroForm.subtitle_en" name="subtitle_en"
                   class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white transition-colors" (ngModelChange)="checkDirtyHero()">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-400 mb-1">Descripción (ES)</label>
            <textarea [(ngModel)]="heroForm.description" name="description" rows="3"
                      class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white resize-none transition-colors" (ngModelChange)="checkDirtyHero()"></textarea>
          </div>
          <div>
            <label class="block text-sm text-gray-400 mb-1">Description (EN)</label>
            <textarea [(ngModel)]="heroForm.description_en" name="description_en" rows="3"
                      class="w-full px-4 py-2 bg-dark-bg border border-dark-border rounded-lg focus:border-primary outline-none text-white resize-none transition-colors" (ngModelChange)="checkDirtyHero()"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
